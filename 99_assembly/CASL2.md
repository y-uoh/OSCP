# CASL2

### 構 文
下記は`PRG0101`と呼ばれる、アセンブラ言語のプログラムの**最も典型的な形（ひな型）**を示したプログラム。まずはこのプログラムをベースに色々とみていく

```nasm
1:;プログラム0101
2:PRG0101 START    ;プログラム開始
3:        RPUSH    ;決まり文句
4:        NOP      ;ここからプログラム本体
5:        RPOP     ;RPUSHと対で決まり文句
6:        RET      ;プログラム処理終了
7:        END      ;プログラムの１番最後の決まり文句
```
#### コメントアウト
`;`以降の文字列はコメントアウト

#### プログラムの開始:2行目
```nasm
2:PRG0101 START
```
プログラム開始は2つの項目から書かれている。  
- 第一項目：ラベル　-> PRF0101
  - ラベルとは、プログラムの名前を表したり、他の行から参照するために使われる。ここでは`PRF0101`はプログラム名を表してる
  - ラベルは行の１文字目から書かれる。インデントが下げられてない
- 第二項目：START命令
  - 第二項目は実際の命令コードが記述される（ここではSTARTを実行）
  - START命令はプログラム実行のとき、この行から開始するということを宣言するもの

#### プログラム本体
#### 3,5行目
- インデントが下げられていないので、ラベルではなく、命令コードであることが分かる
- 3行目のRPUSH命令と5行目のRPOP命令は対をなす命令になる。（細部の動作はじ後説明）。それまではプログラムを安全に動作させる「おまじない」命令という理解でよい。
- 3行目のRPUSH命令はSTART命令の後に必ず書く
- 5行目のRPOPはRET命令の直前に必ず書く

#### 4行目
- インデントが下げられていないので、ラベルではなく、命令コードであることが分かる
- **NOP命令**は、**ノーオペレーションコード**と呼ばれ、何もしないという処理を行う

#### プログラム終了
#### 6行目
- インデントが下げられていないので、ラベルではなく、命令コードであることが分かる
- RET（リターン）命令は、プログラムの動作を終了させる処理を行う命令

#### 7行目
- インデントが下げられていないので、ラベルではなく、命令コードであることが分かる
- END命令は、プログラムの記述の終了を示す命令コードである。
- これ以降に命令を書いても無視されるかエラーになる。
- RET命令に似ているが、RETが動作の終了であるのに対し、ENDは記述の終了であるという違いがある。（細部はのち説明）

#### 整　理
上述をまとめると以下のようになる。この基本的なひな型は覚えておく
```nasm
1:;プログラム0101
2:PRG0101 START    ;プログラム開始
3:        RPUSH    ;決まり文句

;↓↓↓↓↓↓↓↓↓↓　実質的なプログラムはここから　↓↓↓↓↓↓↓↓↓↓↓↓

4:        NOP      ;ここからプログラム本体

;↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑　ここまで　↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑

5:        RPOP     ;RPUSHと対で決まり文句
6:        RET      ;プログラム処理終了

;------------- ココには、DC命令、DS命令といった命令を書く　--------------

7:        END      ;プログラムの１番最後の決まり文句
```
1. 最初にSTART命令、FPUSH命令を記述。STARTには目的に応じたプログラム名を書く
2. 実質的なプログラムを書く
3. RPOP命令、RET命令を記述
4. DC命令、DS命令といった命令を記述（後述）
5. END命令を記述
